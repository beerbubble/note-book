<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>051. 基于“分发层 + 应用层”双层 nginx 架构提升缓存命中率方案分析 | Mrcode 笔记本</title>
    <meta name="description" content="用来记录工作和学习过程中的笔记，汇总成册方便查阅，类容涵盖各类技术，如：java、git、elasticsearch、mycat、设计模式、gradle、vue - mrcode.cn">
    
    
    <link rel="preload" href="/note-book/assets/css/0.styles.7ff3853c.css" as="style"><link rel="preload" href="/note-book/assets/js/app.a3aaadec.js" as="script"><link rel="preload" href="/note-book/assets/js/2.f7d6e51c.js" as="script"><link rel="preload" href="/note-book/assets/js/37.5329e714.js" as="script"><link rel="prefetch" href="/note-book/assets/js/10.60b38d30.js"><link rel="prefetch" href="/note-book/assets/js/100.600bf219.js"><link rel="prefetch" href="/note-book/assets/js/101.95edb11e.js"><link rel="prefetch" href="/note-book/assets/js/102.b73f21d4.js"><link rel="prefetch" href="/note-book/assets/js/103.155dbe1b.js"><link rel="prefetch" href="/note-book/assets/js/104.197b2707.js"><link rel="prefetch" href="/note-book/assets/js/105.c8287616.js"><link rel="prefetch" href="/note-book/assets/js/106.35c2ba4a.js"><link rel="prefetch" href="/note-book/assets/js/107.7dba9514.js"><link rel="prefetch" href="/note-book/assets/js/108.b3593176.js"><link rel="prefetch" href="/note-book/assets/js/109.4804e5cf.js"><link rel="prefetch" href="/note-book/assets/js/11.fd742f85.js"><link rel="prefetch" href="/note-book/assets/js/110.1d93a19d.js"><link rel="prefetch" href="/note-book/assets/js/111.ad877afc.js"><link rel="prefetch" href="/note-book/assets/js/112.cae3fa7d.js"><link rel="prefetch" href="/note-book/assets/js/113.d7dd6137.js"><link rel="prefetch" href="/note-book/assets/js/114.bd9235a2.js"><link rel="prefetch" href="/note-book/assets/js/115.8ef5012a.js"><link rel="prefetch" href="/note-book/assets/js/116.879a0201.js"><link rel="prefetch" href="/note-book/assets/js/117.ec29f569.js"><link rel="prefetch" href="/note-book/assets/js/118.d8f12472.js"><link rel="prefetch" href="/note-book/assets/js/119.9f052729.js"><link rel="prefetch" href="/note-book/assets/js/12.da9dc149.js"><link rel="prefetch" href="/note-book/assets/js/120.714fa0ff.js"><link rel="prefetch" href="/note-book/assets/js/121.eade3dd5.js"><link rel="prefetch" href="/note-book/assets/js/122.b5d20058.js"><link rel="prefetch" href="/note-book/assets/js/123.3d59e873.js"><link rel="prefetch" href="/note-book/assets/js/124.cee8dd90.js"><link rel="prefetch" href="/note-book/assets/js/125.c376daf7.js"><link rel="prefetch" href="/note-book/assets/js/126.49d7f71a.js"><link rel="prefetch" href="/note-book/assets/js/127.c2ce554a.js"><link rel="prefetch" href="/note-book/assets/js/128.6833e5dd.js"><link rel="prefetch" href="/note-book/assets/js/129.79dfd1fb.js"><link rel="prefetch" href="/note-book/assets/js/13.ab402973.js"><link rel="prefetch" href="/note-book/assets/js/130.0591ceb6.js"><link rel="prefetch" href="/note-book/assets/js/131.ef8a65b5.js"><link rel="prefetch" href="/note-book/assets/js/132.4343d879.js"><link rel="prefetch" href="/note-book/assets/js/133.702eadd0.js"><link rel="prefetch" href="/note-book/assets/js/134.89f1658c.js"><link rel="prefetch" href="/note-book/assets/js/135.45f20e12.js"><link rel="prefetch" href="/note-book/assets/js/136.eb99465b.js"><link rel="prefetch" href="/note-book/assets/js/137.4b09ab60.js"><link rel="prefetch" href="/note-book/assets/js/138.1fa6144c.js"><link rel="prefetch" href="/note-book/assets/js/139.e7b9865e.js"><link rel="prefetch" href="/note-book/assets/js/14.33452d81.js"><link rel="prefetch" href="/note-book/assets/js/140.11bdcfa7.js"><link rel="prefetch" href="/note-book/assets/js/141.5894a5fc.js"><link rel="prefetch" href="/note-book/assets/js/142.26714452.js"><link rel="prefetch" href="/note-book/assets/js/143.cd320760.js"><link rel="prefetch" href="/note-book/assets/js/144.2e692279.js"><link rel="prefetch" href="/note-book/assets/js/145.04201047.js"><link rel="prefetch" href="/note-book/assets/js/146.56aecc0c.js"><link rel="prefetch" href="/note-book/assets/js/147.406c8213.js"><link rel="prefetch" href="/note-book/assets/js/148.4accd907.js"><link rel="prefetch" href="/note-book/assets/js/149.4e0435ab.js"><link rel="prefetch" href="/note-book/assets/js/15.9ff9bafa.js"><link rel="prefetch" href="/note-book/assets/js/150.07f113a0.js"><link rel="prefetch" href="/note-book/assets/js/151.bc679303.js"><link rel="prefetch" href="/note-book/assets/js/152.848b7f1b.js"><link rel="prefetch" href="/note-book/assets/js/153.4c13636f.js"><link rel="prefetch" href="/note-book/assets/js/154.dda18907.js"><link rel="prefetch" href="/note-book/assets/js/155.4bf2160c.js"><link rel="prefetch" href="/note-book/assets/js/156.3e7e9cdd.js"><link rel="prefetch" href="/note-book/assets/js/157.8227f207.js"><link rel="prefetch" href="/note-book/assets/js/158.3507261d.js"><link rel="prefetch" href="/note-book/assets/js/159.d8e410eb.js"><link rel="prefetch" href="/note-book/assets/js/16.0dedfa55.js"><link rel="prefetch" href="/note-book/assets/js/160.052a1113.js"><link rel="prefetch" href="/note-book/assets/js/161.c6fee3b3.js"><link rel="prefetch" href="/note-book/assets/js/162.da7a50f7.js"><link rel="prefetch" href="/note-book/assets/js/163.5e265f9d.js"><link rel="prefetch" href="/note-book/assets/js/164.55393f79.js"><link rel="prefetch" href="/note-book/assets/js/165.7f808169.js"><link rel="prefetch" href="/note-book/assets/js/166.e2ba9008.js"><link rel="prefetch" href="/note-book/assets/js/167.6c9b5955.js"><link rel="prefetch" href="/note-book/assets/js/168.76aac8c9.js"><link rel="prefetch" href="/note-book/assets/js/169.3bc1aeda.js"><link rel="prefetch" href="/note-book/assets/js/17.24953a61.js"><link rel="prefetch" href="/note-book/assets/js/170.d2038e99.js"><link rel="prefetch" href="/note-book/assets/js/171.52a3066f.js"><link rel="prefetch" href="/note-book/assets/js/172.252f2d37.js"><link rel="prefetch" href="/note-book/assets/js/173.78f6ddb6.js"><link rel="prefetch" href="/note-book/assets/js/174.f6e9def1.js"><link rel="prefetch" href="/note-book/assets/js/175.e759b741.js"><link rel="prefetch" href="/note-book/assets/js/176.88554876.js"><link rel="prefetch" href="/note-book/assets/js/177.a2b70b4b.js"><link rel="prefetch" href="/note-book/assets/js/178.e94cc453.js"><link rel="prefetch" href="/note-book/assets/js/179.80fea106.js"><link rel="prefetch" href="/note-book/assets/js/18.cf5e6857.js"><link rel="prefetch" href="/note-book/assets/js/180.acbdc19b.js"><link rel="prefetch" href="/note-book/assets/js/181.470282a1.js"><link rel="prefetch" href="/note-book/assets/js/182.a93c449c.js"><link rel="prefetch" href="/note-book/assets/js/183.d164ecaa.js"><link rel="prefetch" href="/note-book/assets/js/184.855a7478.js"><link rel="prefetch" href="/note-book/assets/js/185.da80952f.js"><link rel="prefetch" href="/note-book/assets/js/186.76941090.js"><link rel="prefetch" href="/note-book/assets/js/187.5e947e3d.js"><link rel="prefetch" href="/note-book/assets/js/188.b3a860e8.js"><link rel="prefetch" href="/note-book/assets/js/189.af3b9c40.js"><link rel="prefetch" href="/note-book/assets/js/19.1da0d7ef.js"><link rel="prefetch" href="/note-book/assets/js/190.9172e8d8.js"><link rel="prefetch" href="/note-book/assets/js/191.b29cdac2.js"><link rel="prefetch" href="/note-book/assets/js/192.dbcdbf6d.js"><link rel="prefetch" href="/note-book/assets/js/193.c9f3a013.js"><link rel="prefetch" href="/note-book/assets/js/194.7cafe4d7.js"><link rel="prefetch" href="/note-book/assets/js/195.cb6016b3.js"><link rel="prefetch" href="/note-book/assets/js/196.39888d63.js"><link rel="prefetch" href="/note-book/assets/js/197.3ba34e0e.js"><link rel="prefetch" href="/note-book/assets/js/198.905852a5.js"><link rel="prefetch" href="/note-book/assets/js/199.830726fc.js"><link rel="prefetch" href="/note-book/assets/js/20.daa32f60.js"><link rel="prefetch" href="/note-book/assets/js/200.9d7da802.js"><link rel="prefetch" href="/note-book/assets/js/201.b4303b61.js"><link rel="prefetch" href="/note-book/assets/js/202.1277e387.js"><link rel="prefetch" href="/note-book/assets/js/203.38e4f5dd.js"><link rel="prefetch" href="/note-book/assets/js/204.38e580c5.js"><link rel="prefetch" href="/note-book/assets/js/205.3427243e.js"><link rel="prefetch" href="/note-book/assets/js/206.11ce00e1.js"><link rel="prefetch" href="/note-book/assets/js/207.2a5bf356.js"><link rel="prefetch" href="/note-book/assets/js/208.b3d510de.js"><link rel="prefetch" href="/note-book/assets/js/209.690b118e.js"><link rel="prefetch" href="/note-book/assets/js/21.2abb96eb.js"><link rel="prefetch" href="/note-book/assets/js/210.41cb588b.js"><link rel="prefetch" href="/note-book/assets/js/211.d1c67851.js"><link rel="prefetch" href="/note-book/assets/js/212.e63f5882.js"><link rel="prefetch" href="/note-book/assets/js/213.81df2613.js"><link rel="prefetch" href="/note-book/assets/js/214.3eb61877.js"><link rel="prefetch" href="/note-book/assets/js/215.36a5d82f.js"><link rel="prefetch" href="/note-book/assets/js/216.a633ff87.js"><link rel="prefetch" href="/note-book/assets/js/217.5cf51aec.js"><link rel="prefetch" href="/note-book/assets/js/218.b0ea8a37.js"><link rel="prefetch" href="/note-book/assets/js/219.c3c45562.js"><link rel="prefetch" href="/note-book/assets/js/22.24314269.js"><link rel="prefetch" href="/note-book/assets/js/220.091979b7.js"><link rel="prefetch" href="/note-book/assets/js/221.0a25551d.js"><link rel="prefetch" href="/note-book/assets/js/222.345808b4.js"><link rel="prefetch" href="/note-book/assets/js/223.a6c1b85b.js"><link rel="prefetch" href="/note-book/assets/js/224.5be8e162.js"><link rel="prefetch" href="/note-book/assets/js/225.50d0bab9.js"><link rel="prefetch" href="/note-book/assets/js/226.f7973c86.js"><link rel="prefetch" href="/note-book/assets/js/227.0bf1d797.js"><link rel="prefetch" href="/note-book/assets/js/228.23ef3aeb.js"><link rel="prefetch" href="/note-book/assets/js/229.fabc01a2.js"><link rel="prefetch" href="/note-book/assets/js/23.535620e7.js"><link rel="prefetch" href="/note-book/assets/js/230.1a075ad4.js"><link rel="prefetch" href="/note-book/assets/js/231.858ce75c.js"><link rel="prefetch" href="/note-book/assets/js/232.c34108a4.js"><link rel="prefetch" href="/note-book/assets/js/233.e68d0411.js"><link rel="prefetch" href="/note-book/assets/js/234.688061e1.js"><link rel="prefetch" href="/note-book/assets/js/235.f2b7650e.js"><link rel="prefetch" href="/note-book/assets/js/236.cfb2391b.js"><link rel="prefetch" href="/note-book/assets/js/237.90e12fd0.js"><link rel="prefetch" href="/note-book/assets/js/238.16226b40.js"><link rel="prefetch" href="/note-book/assets/js/239.34a7ab95.js"><link rel="prefetch" href="/note-book/assets/js/24.a0e4f980.js"><link rel="prefetch" href="/note-book/assets/js/240.74975ab8.js"><link rel="prefetch" href="/note-book/assets/js/241.e900c9ac.js"><link rel="prefetch" href="/note-book/assets/js/242.747753ed.js"><link rel="prefetch" href="/note-book/assets/js/243.004d7e16.js"><link rel="prefetch" href="/note-book/assets/js/244.e011ba22.js"><link rel="prefetch" href="/note-book/assets/js/245.1275c451.js"><link rel="prefetch" href="/note-book/assets/js/246.77d86091.js"><link rel="prefetch" href="/note-book/assets/js/247.3831096e.js"><link rel="prefetch" href="/note-book/assets/js/248.debe14e2.js"><link rel="prefetch" href="/note-book/assets/js/249.173f7fef.js"><link rel="prefetch" href="/note-book/assets/js/25.02c9a405.js"><link rel="prefetch" href="/note-book/assets/js/250.947c21e6.js"><link rel="prefetch" href="/note-book/assets/js/251.9690d531.js"><link rel="prefetch" href="/note-book/assets/js/252.3bdaa825.js"><link rel="prefetch" href="/note-book/assets/js/253.f65dabc9.js"><link rel="prefetch" href="/note-book/assets/js/254.ee25f036.js"><link rel="prefetch" href="/note-book/assets/js/255.72177aea.js"><link rel="prefetch" href="/note-book/assets/js/256.3abc2266.js"><link rel="prefetch" href="/note-book/assets/js/257.7203e051.js"><link rel="prefetch" href="/note-book/assets/js/258.b3936b11.js"><link rel="prefetch" href="/note-book/assets/js/259.b0e1855a.js"><link rel="prefetch" href="/note-book/assets/js/26.bf808885.js"><link rel="prefetch" href="/note-book/assets/js/260.61577b43.js"><link rel="prefetch" href="/note-book/assets/js/261.4ea9a337.js"><link rel="prefetch" href="/note-book/assets/js/262.d1fa84ed.js"><link rel="prefetch" href="/note-book/assets/js/263.5e86e0b8.js"><link rel="prefetch" href="/note-book/assets/js/264.ce1324a4.js"><link rel="prefetch" href="/note-book/assets/js/265.79d30ac9.js"><link rel="prefetch" href="/note-book/assets/js/266.8bd21ff2.js"><link rel="prefetch" href="/note-book/assets/js/267.23c83335.js"><link rel="prefetch" href="/note-book/assets/js/268.efc83a7b.js"><link rel="prefetch" href="/note-book/assets/js/269.82457ef1.js"><link rel="prefetch" href="/note-book/assets/js/27.1ac903d0.js"><link rel="prefetch" href="/note-book/assets/js/270.ddf346f9.js"><link rel="prefetch" href="/note-book/assets/js/271.86aab84c.js"><link rel="prefetch" href="/note-book/assets/js/272.609d9dba.js"><link rel="prefetch" href="/note-book/assets/js/273.82582784.js"><link rel="prefetch" href="/note-book/assets/js/274.1eabe04a.js"><link rel="prefetch" href="/note-book/assets/js/275.43d58f7f.js"><link rel="prefetch" href="/note-book/assets/js/276.15419397.js"><link rel="prefetch" href="/note-book/assets/js/277.d54545ae.js"><link rel="prefetch" href="/note-book/assets/js/278.65bb6319.js"><link rel="prefetch" href="/note-book/assets/js/279.d5dc4c98.js"><link rel="prefetch" href="/note-book/assets/js/28.8937f9c5.js"><link rel="prefetch" href="/note-book/assets/js/280.82377b84.js"><link rel="prefetch" href="/note-book/assets/js/281.4efc2b9c.js"><link rel="prefetch" href="/note-book/assets/js/282.68f3949d.js"><link rel="prefetch" href="/note-book/assets/js/29.0a99455a.js"><link rel="prefetch" href="/note-book/assets/js/3.0ea9e092.js"><link rel="prefetch" href="/note-book/assets/js/30.78427ab2.js"><link rel="prefetch" href="/note-book/assets/js/31.d94bc0da.js"><link rel="prefetch" href="/note-book/assets/js/32.68ca079b.js"><link rel="prefetch" href="/note-book/assets/js/33.bbecc7d9.js"><link rel="prefetch" href="/note-book/assets/js/34.ba1c9aa7.js"><link rel="prefetch" href="/note-book/assets/js/35.b51e6d25.js"><link rel="prefetch" href="/note-book/assets/js/36.ca3ed9ef.js"><link rel="prefetch" href="/note-book/assets/js/38.e225bc96.js"><link rel="prefetch" href="/note-book/assets/js/39.3b2dbdf8.js"><link rel="prefetch" href="/note-book/assets/js/4.23ae3c04.js"><link rel="prefetch" href="/note-book/assets/js/40.91f0660d.js"><link rel="prefetch" href="/note-book/assets/js/41.1ce93a3e.js"><link rel="prefetch" href="/note-book/assets/js/42.72319621.js"><link rel="prefetch" href="/note-book/assets/js/43.0ea28ce8.js"><link rel="prefetch" href="/note-book/assets/js/44.5ae1bdc5.js"><link rel="prefetch" href="/note-book/assets/js/45.3a7a2f35.js"><link rel="prefetch" href="/note-book/assets/js/46.c1502a21.js"><link rel="prefetch" href="/note-book/assets/js/47.5a43476b.js"><link rel="prefetch" href="/note-book/assets/js/48.896f2eec.js"><link rel="prefetch" href="/note-book/assets/js/49.9465a00f.js"><link rel="prefetch" href="/note-book/assets/js/5.abf9ee48.js"><link rel="prefetch" href="/note-book/assets/js/50.db332c5e.js"><link rel="prefetch" href="/note-book/assets/js/51.6bb33823.js"><link rel="prefetch" href="/note-book/assets/js/52.a3323895.js"><link rel="prefetch" href="/note-book/assets/js/53.71a7efae.js"><link rel="prefetch" href="/note-book/assets/js/54.ab55a5eb.js"><link rel="prefetch" href="/note-book/assets/js/55.88606e17.js"><link rel="prefetch" href="/note-book/assets/js/56.4be260da.js"><link rel="prefetch" href="/note-book/assets/js/57.6f24f06b.js"><link rel="prefetch" href="/note-book/assets/js/58.63712ef8.js"><link rel="prefetch" href="/note-book/assets/js/59.731d556a.js"><link rel="prefetch" href="/note-book/assets/js/6.4c2ba18f.js"><link rel="prefetch" href="/note-book/assets/js/60.a554c929.js"><link rel="prefetch" href="/note-book/assets/js/61.df615271.js"><link rel="prefetch" href="/note-book/assets/js/62.fb69a66e.js"><link rel="prefetch" href="/note-book/assets/js/63.419af611.js"><link rel="prefetch" href="/note-book/assets/js/64.ec6a2d53.js"><link rel="prefetch" href="/note-book/assets/js/65.e070ece2.js"><link rel="prefetch" href="/note-book/assets/js/66.fcebb486.js"><link rel="prefetch" href="/note-book/assets/js/67.aa28f9ff.js"><link rel="prefetch" href="/note-book/assets/js/68.1ceea6f9.js"><link rel="prefetch" href="/note-book/assets/js/69.60d484bd.js"><link rel="prefetch" href="/note-book/assets/js/7.36da2661.js"><link rel="prefetch" href="/note-book/assets/js/70.f0684e37.js"><link rel="prefetch" href="/note-book/assets/js/71.c7463aa4.js"><link rel="prefetch" href="/note-book/assets/js/72.e5bf4e26.js"><link rel="prefetch" href="/note-book/assets/js/73.808b847f.js"><link rel="prefetch" href="/note-book/assets/js/74.1b14310f.js"><link rel="prefetch" href="/note-book/assets/js/75.985a12c5.js"><link rel="prefetch" href="/note-book/assets/js/76.add03da7.js"><link rel="prefetch" href="/note-book/assets/js/77.9d729d24.js"><link rel="prefetch" href="/note-book/assets/js/78.3b92993c.js"><link rel="prefetch" href="/note-book/assets/js/79.e274877e.js"><link rel="prefetch" href="/note-book/assets/js/8.7b1d2a29.js"><link rel="prefetch" href="/note-book/assets/js/80.69464420.js"><link rel="prefetch" href="/note-book/assets/js/81.b9d689ca.js"><link rel="prefetch" href="/note-book/assets/js/82.a734cfde.js"><link rel="prefetch" href="/note-book/assets/js/83.ee32d901.js"><link rel="prefetch" href="/note-book/assets/js/84.63d95733.js"><link rel="prefetch" href="/note-book/assets/js/85.241ae640.js"><link rel="prefetch" href="/note-book/assets/js/86.1e309755.js"><link rel="prefetch" href="/note-book/assets/js/87.0c68a967.js"><link rel="prefetch" href="/note-book/assets/js/88.9c68e15c.js"><link rel="prefetch" href="/note-book/assets/js/89.a149ef23.js"><link rel="prefetch" href="/note-book/assets/js/9.1f777bdc.js"><link rel="prefetch" href="/note-book/assets/js/90.a23c718a.js"><link rel="prefetch" href="/note-book/assets/js/91.9fb290bc.js"><link rel="prefetch" href="/note-book/assets/js/92.02e9637e.js"><link rel="prefetch" href="/note-book/assets/js/93.a20d570c.js"><link rel="prefetch" href="/note-book/assets/js/94.bd42a197.js"><link rel="prefetch" href="/note-book/assets/js/95.62196dfe.js"><link rel="prefetch" href="/note-book/assets/js/96.84afb00b.js"><link rel="prefetch" href="/note-book/assets/js/97.ecabc32c.js"><link rel="prefetch" href="/note-book/assets/js/98.93e28784.js"><link rel="prefetch" href="/note-book/assets/js/99.349e8197.js">
    <link rel="stylesheet" href="/note-book/assets/css/0.styles.7ff3853c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note-book/" class="home-link router-link-active"><!----> <span class="site-name">Mrcode 笔记本</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note-book/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">设计模式</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/imocc/design_pattern/" class="nav-link">设计模式（慕课）</a></li><li class="dropdown-item"><!----> <a href="/note-book/design_pattern/" class="nav-link">研磨设计模式（李兴华）</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Mycat</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/mycat/" class="nav-link">mycat 1</a></li><li class="dropdown-item"><!----> <a href="/note-book/mycat2/" class="nav-link">mycat 2</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">elasticsearch</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/elasticsearch-core/" class="nav-link">核心知识篇</a></li><li class="dropdown-item"><!----> <a href="/note-book/elasticsearch-senior/" class="nav-link">高级知识篇</a></li></ul></div></div><div class="nav-item"><a href="/note-book/_posts/" class="nav-link">博客（零散文章）</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">系列学习中</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/cache-pdp/" class="nav-link router-link-active">亿级流量电商详情页系统实战（缓存架构）</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/introduce/" class="nav-link">本笔记介绍</a></li></ul></div></div> <a href="https://github.com/zq99299/note-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note-book/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">设计模式</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/imocc/design_pattern/" class="nav-link">设计模式（慕课）</a></li><li class="dropdown-item"><!----> <a href="/note-book/design_pattern/" class="nav-link">研磨设计模式（李兴华）</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Mycat</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/mycat/" class="nav-link">mycat 1</a></li><li class="dropdown-item"><!----> <a href="/note-book/mycat2/" class="nav-link">mycat 2</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">elasticsearch</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/elasticsearch-core/" class="nav-link">核心知识篇</a></li><li class="dropdown-item"><!----> <a href="/note-book/elasticsearch-senior/" class="nav-link">高级知识篇</a></li></ul></div></div><div class="nav-item"><a href="/note-book/_posts/" class="nav-link">博客（零散文章）</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">系列学习中</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/cache-pdp/" class="nav-link router-link-active">亿级流量电商详情页系统实战（缓存架构）</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">了解更多</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note-book/introduce/" class="nav-link">本笔记介绍</a></li></ul></div></div> <a href="https://github.com/zq99299/note-book" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/note-book/cache-pdp/" class="sidebar-link">亿级流量电商详情页系统实战（第二版）：缓存架构+高可用服务架构+微服务架构</a></li><li><a href="/note-book/cache-pdp/001-introduce.html" class="sidebar-link">001. 课程介绍以及高并发高可用复杂系统中的缓存架构有哪些东西</a></li><li><a href="/note-book/cache-pdp/002.html" class="sidebar-link">002. 基于大型电商网站中的商品详情页系统贯穿的授课思路介绍</a></li><li><a href="/note-book/cache-pdp/003.html" class="sidebar-link">003. 小型电商网站的商品详情页的页面静态化架构以及其缺陷</a></li><li><a href="/note-book/cache-pdp/004.html" class="sidebar-link">004. 大型电商网站的异步多级缓存构建 + nginx 数据本地化动态渲染的架构</a></li><li><a href="/note-book/cache-pdp/005.html" class="sidebar-link">005. 能够支撑高并发 + 高可用 + 海量数据 + 备份恢复的 redis 的重要性</a></li><li><a href="/note-book/cache-pdp/006.html" class="sidebar-link">006. 从零开始在虚拟机中一步一步搭建一个 4 个节点的 CentOS 集群</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>redis</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/note-book/cache-pdp/035.html" class="sidebar-link">035. 亿级流量商品详情页的多级缓存架构以及架构中每一层的意义</a></li><li><a href="/note-book/cache-pdp/036.html" class="sidebar-link">036. Cache Aside Pattern 缓存+数据库读写模式的分析</a></li><li><a href="/note-book/cache-pdp/037.html" class="sidebar-link">037. 高并发场景下的缓存 + 数据库双写不一致问题分析与解决方案设计</a></li><li><a href="/note-book/cache-pdp/038.html" class="sidebar-link">038. 在 linux 虚拟机中安装部署 MySQL 数据库</a></li><li><a href="/note-book/cache-pdp/039.html" class="sidebar-link">039. 库存服务的开发框架整合与搭建：spring boot + mybatis + jedis</a></li><li><a href="/note-book/cache-pdp/040.html" class="sidebar-link">040. 在库存服务中实现缓存与数据库双写一致性保障方案</a></li><li><a href="/note-book/cache-pdp/044.html" class="sidebar-link">044. 库存服务代码调试以及打印日志观察服务的运行流程是否正确</a></li><li><a href="/note-book/cache-pdp/045.html" class="sidebar-link">045. 商品详情页结构分析、缓存全量更新问题以及缓存维度化解决方案</a></li><li><a href="/note-book/cache-pdp/046.html" class="sidebar-link">046. 缓存数据生产服务的工作流程分析以及工程环境搭建</a></li><li><a href="/note-book/cache-pdp/047.html" class="sidebar-link">047. 完成 spring boot 整合 ehcache 的搭建以支持服务本地堆缓存</a></li><li><a href="/note-book/cache-pdp/048.html" class="sidebar-link">048. redis 的 LRU 缓存清除算法讲解以及相关配置使用</a></li><li><a href="/note-book/cache-pdp/049.html" class="sidebar-link">049. zookeeper + kafka 集群的安装部署以及如何简单使用的介绍</a></li><li><a href="/note-book/cache-pdp/050.html" class="sidebar-link">050. 基于 kafka + ehcache + redis 完成缓存数据生产服务的开发与测试</a></li><li><a href="/note-book/cache-pdp/051.html" class="active sidebar-link">051. 基于“分发层 + 应用层”双层 nginx 架构提升缓存命中率方案分析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note-book/cache-pdp/051.html#缓存命中率低" class="sidebar-link">缓存命中率低</a></li><li class="sidebar-sub-header"><a href="/note-book/cache-pdp/051.html#如何提升缓存命中率？" class="sidebar-link">如何提升缓存命中率？</a></li></ul></li><li><a href="/note-book/cache-pdp/052.html" class="sidebar-link">052. 基于 OpenResty 部署应用层 nginx 以及 nginx + lua 开发 hello world</a></li><li><a href="/note-book/cache-pdp/053.html" class="sidebar-link">053. 部署分发层 nginx 以及基于 lua 完成基于商品 id 的定向流量分发策略</a></li><li><a href="/note-book/cache-pdp/054.html" class="sidebar-link">054. 基于 nginx + lua + java 完成多级缓存架构的核心业务逻辑（一）</a></li><li><a href="/note-book/cache-pdp/055.html" class="sidebar-link">055. 基于 nginx + lua + java 完成多级缓存架构的核心业务逻辑（二）</a></li><li><a href="/note-book/cache-pdp/056.html" class="sidebar-link">056. 基于 nginx + lua + java 完成多级缓存架构的核心业务逻辑（三）</a></li><li><a href="/note-book/cache-pdp/057.html" class="sidebar-link">057. 分布式缓存重建并发冲突问题以及 zookeeper 分布式锁解决方案</a></li><li><a href="/note-book/cache-pdp/058.html" class="sidebar-link">058. 缓存数据生产服务中的 zk 分布式锁解决方案的代码实现（一）</a></li><li><a href="/note-book/cache-pdp/059.html" class="sidebar-link">059. 缓存数据生产服务中的 zk 分布式锁解决方案的代码实现（二）</a></li><li><a href="/note-book/cache-pdp/060.html" class="sidebar-link">060. 缓存数据生产服务中的 zk 分布式锁解决方案的代码实现（三）</a></li><li><a href="/note-book/cache-pdp/061.html" class="sidebar-link">061. Java 程序员、缓存架构以及 Storm 大数据实时计算之间的关系</a></li><li><a href="/note-book/cache-pdp/062.html" class="sidebar-link">062. 讲给 Java 工程师的史上最通俗易懂 Storm 教程：大白话介绍</a></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="_051-基于“分发层-应用层”双层-nginx-架构提升缓存命中率方案分析"><a href="#_051-基于“分发层-应用层”双层-nginx-架构提升缓存命中率方案分析" aria-hidden="true" class="header-anchor">#</a> 051. 基于“分发层 + 应用层”双层 nginx 架构提升缓存命中率方案分析</h1> <p>缓存数据生产服务那一层已经搞定了，相当于三层缓存架构中的本地堆缓存 + redis 分布式缓存都搞定了</p> <p>就要来做三级缓存中的 nginx 那一层的缓存了</p> <h2 id="缓存命中率低"><a href="#缓存命中率低" aria-hidden="true" class="header-anchor">#</a> 缓存命中率低</h2> <p>如果一般来说，你默认会部署多个 nginx，在里面都会放一些缓存，就默认情况下，此时缓存命中率是比较低的</p> <p><img src="/note-book/assets/img/markdown-img-paste-20190407210110612.88a47fa6.png" alt=""></p> <p>如上图，被均衡分发了，所以命中率很低。</p> <h2 id="如何提升缓存命中率？"><a href="#如何提升缓存命中率？" aria-hidden="true" class="header-anchor">#</a> 如何提升缓存命中率？</h2> <p>方案：分发层+应用层，双层 nginx</p> <p>分发层 nginx，负责流量分发的逻辑和策略，这个里面它可以根据你自己定义的一些规则，
比如根据 productId 去进行 hash，然后对后端的 nginx 数量取模，将某一个商品的访问的请求，
就固定路由到一个 nginx 后端服务器上去，保证说只会从 redis 中获取一次缓存数据，
后面全都是走 nginx 本地缓存了</p> <p>后端的 nginx 服务器，就称之为应用服务器; 最前端的 nginx 服务器，被称之为分发服务器</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>看似很简单，其实很有用，在实际的生产环境中，可以大幅度提升你的 nginx 本地缓存这一层的命中率，
大幅度减少 redis 后端的压力，提升性能</p> <div class="tip custom-block"><p class="custom-block-title">疑问</p> <p>到现在我都有好多疑问，是基于自己使用 spring cloud 来看待这种路由到固定的机器上面去，
其实这就相当于有状态了，在缓冲架构里面他的确能解决缓存命中问题，但是在灵活性上，
增加服务，减少服务就有问题了。 这个疑问现在还不是特别的明确，后续再看吧</p></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zq99299/note-book/edit/master/docs/cache-pdp/051.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: : </span> <span class="time">2019-4-7 22:51:16</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/note-book/cache-pdp/050.html" class="prev">
          050. 基于 kafka + ehcache + redis 完成缓存数据生产服务的开发与测试
        </a></span> <span class="next"><a href="/note-book/cache-pdp/052.html">
          052. 基于 OpenResty 部署应用层 nginx 以及 nginx + lua 开发 hello world
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/note-book/assets/js/app.a3aaadec.js" defer></script><script src="/note-book/assets/js/2.f7d6e51c.js" defer></script><script src="/note-book/assets/js/37.5329e714.js" defer></script>
  </body>
</html>
